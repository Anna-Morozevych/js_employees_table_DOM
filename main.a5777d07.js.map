{"version":3,"sources":["scripts/main.js"],"names":["activeRow","body","document","querySelector","thead","tbody","clickedTitle","fillSelect","selector","office","city","option","createElement","textContent","append","convertSalaryToTable","salary","slice","form","className","insertAdjacentHTML","officeLabel","el","tagName","dataset","qa","name","required","pushNotification","value","div","classList","add","showNotification","element","setTimeout","remove","addEventListener","eventObj","preventDefault","target","hasError","closest","elements","position","age","length","newRow","saveData","editor","innerText","cellIndex","type","replace","style","width","offsetWidth","focus","action","e","key","inputValue","trim","tbodyRows","rows","i","sort","row1","row2","cells","localeCompare","a","b"],"mappings":"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","file":"main.a5777d07.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst body = document.querySelector('body');\nconst thead = document.querySelector('thead');\nconst tbody = document.querySelector('tbody');\nlet clickedTitle = '';\nlet activeRow;\n\nfunction fillSelect(selector) {\n  const office\n= ['Tokyo', 'Singapore', 'London', 'New York', 'Edinburgh', 'San Francisco'];\n\n  for (const city of office) {\n    const option = document.createElement('option');\n\n    option.textContent = city;\n\n    selector.append(option);\n  }\n}\n\nfunction convertSalaryToTable(salary) {\n  if (+salary >= 1000) {\n    const first = salary.slice(0, -3);\n    const second = salary.slice(-3);\n\n    return '$' + first + ',' + second;\n  }\n\n  return '$' + salary;\n}\n\n/* -----add a form to the document----- */\nconst form = document.createElement('form');\n\nform.className = 'new-employee-form';\n\nform.insertAdjacentHTML('beforeend', `\n  <label>\n    Name:\n    <input name=\"name\" type=\"text\">\n  </label>\n\n  <label>\n    Position:\n    <input name=\"position\" type=\"text\">\n  </label>\n\n  <label>\n    Office:\n    <select name=\"office\">\n    </select>\n  </label>\n\n  <label>\n    Age:\n    <input name=\"age\" type=\"number\">\n  </label>\n\n  <label>\n    Salary:\n    <input name=\"salary\" type=\"number\">\n  </label>\n\n  <button type=\"submit\">\n    Save to table\n  </button>\n`);\n\nbody.append(form);\n\nconst officeLabel = document.querySelector('select');\n\nfillSelect(officeLabel);\n\nfor (const el of form) {\n  if (el.tagName === 'INPUT' || el.tagName === 'SELECT') {\n    el.dataset.qa = el.name;\n    el.required = true;\n  }\n}\n\n/* -----Show notification if form data is invalid and add new employee----- */\n\nconst pushNotification = (value, div) => {\n  div.classList = `notification`;\n\n  switch (value) {\n    case 'warning':\n      div.insertAdjacentHTML('afterbegin', `\n      <h2 class='title'>Warning message</h2>\n      <p>Invalid data type</p>\n  `);\n      div.classList.add('warning');\n      break;\n\n    case 'errorName':\n      div.insertAdjacentHTML('afterbegin', `\n      <h2 class='title'>Error message</h2>\n      <p>Name can not be less then 4 chars</p>\n  `);\n      div.classList.add('error');\n      break;\n\n    case 'errorAge':\n      div.insertAdjacentHTML('afterbegin', `\n      <h2 class='title'>Error message</h2>\n      <p>Age should be from 18 to 90 years old</p>\n  `);\n      div.classList.add('error');\n      break;\n\n    case 'success':\n      div.insertAdjacentHTML('afterbegin', `\n      <h2 class='title'>Success message</h2>\n      <p>You have successfully added an employee</p>\n  `);\n      div.classList.add('success');\n      break;\n  }\n};\n\nfunction showNotification(element) {\n  body.append(element);\n\n  setTimeout(() => {\n    element.remove();\n  }, 2000);\n}\n\nform.addEventListener('click', (eventObj) => {\n  eventObj.preventDefault();\n\n  const target = eventObj.target.closest('button');\n\n  let hasError = false;\n\n  if (!target) {\n    return;\n  }\n\n  const div = document.createElement('div');\n\n  if (form.elements.name.value === ''\n    || form.elements.position.value === ''\n    || form.elements.age.value === ''\n    || form.elements.salary.value === ''\n    || +form.elements.salary.value < 0) {\n    pushNotification('warning', div);\n\n    showNotification(div);\n\n    return;\n  }\n\n  if (form.elements.name.value.length < 4) {\n    pushNotification('errorName', div);\n\n    hasError = true;\n  }\n\n  if (+form.elements.age.value < 18 || +form.elements.age.value > 90) {\n    pushNotification('errorAge', div);\n\n    hasError = true;\n  }\n\n  if (!hasError) {\n    pushNotification('success', div);\n\n    const newRow = document.createElement('tr');\n\n    newRow.insertAdjacentHTML('beforeend', `\n    <td>${form.elements.name.value}</td>\n    <td>${form.elements.position.value}</td>\n    <td>${form.elements.office.value}</td>\n    <td>${form.elements.age.value}</td>\n    <td>\n      ${convertSalaryToTable(form.elements.salary.value)}\n    </td>\n  `);\n\n    tbody.append(newRow);\n\n    form.elements.name.value = '';\n    form.elements.position.value = '';\n    form.elements.age.value = '';\n    form.elements.salary.value = '';\n  }\n\n  showNotification(div);\n});\n\n/* -----Implement editing of table cells by double-clicking on it----- */\n\ntbody.addEventListener('dblclick', (eventObj) => {\n  const target = eventObj.target.closest('td');\n\n  if (!target) {\n    return;\n  }\n\n  let saveData = target.innerText;\n  let editor;\n  const cellIndex = target.cellIndex;\n\n  if (target.cellIndex === 2) {\n    editor = document.createElement('select');\n    fillSelect(editor);\n  } else {\n    editor = document.createElement('input');\n  }\n\n  editor.className = 'cell-input';\n  target.innerText = '';\n\n  if (cellIndex === 3 || cellIndex === 4) {\n    editor.type = 'number';\n  }\n\n  if (cellIndex === 4) {\n    saveData = saveData.slice(1).replace(',', '');\n  }\n\n  editor.value = saveData;\n  editor.style.width = (target.offsetWidth - 18) + 'px';\n\n  target.append(editor);\n  editor.focus();\n\n  editor.addEventListener('blur', action);\n  editor.addEventListener('keydown', action);\n\n  function action(e) {\n    if (e.key === 'Enter' || e.type === 'blur') {\n      let inputValue = editor.value.trim();\n\n      if ((cellIndex === 3 || cellIndex === 4)\n      && inputValue <= 0) {\n        inputValue = saveData;\n      }\n\n      if (cellIndex === 3 && (+inputValue < 18 || +inputValue > 90)) {\n        inputValue = saveData;\n      }\n\n      if (inputValue.length === 0) {\n        inputValue = saveData;\n      } else {\n        if (cellIndex === 4) {\n          inputValue = convertSalaryToTable(inputValue);\n        }\n      }\n\n      target.textContent = inputValue;\n      editor.remove();\n    }\n  };\n});\n\n/* -----table sorting by clicking on the title----- */\n\nthead.addEventListener('click', (eventObj) => {\n  const target = eventObj.target;\n  const tbodyRows = [ ...tbody.rows ];\n\n  if (!target) {\n    return;\n  }\n\n  const i = target.cellIndex;\n\n  switch (true) {\n    case (i <= 2):\n      if (target.innerText !== clickedTitle) {\n        clickedTitle = target.innerText;\n\n        tbodyRows.sort((row1, row2) =>\n          row1.cells[i].innerText.localeCompare(row2.cells[i].innerText));\n      } else {\n        clickedTitle = '';\n\n        tbodyRows.sort((row1, row2) =>\n          row2.cells[i].innerText.localeCompare(row1.cells[i].innerText));\n      }\n      break;\n\n    case (i === 3):\n      if (target.innerText !== clickedTitle) {\n        clickedTitle = target.innerText;\n\n        tbodyRows.sort((row1, row2) => {\n          const a = +row1.cells[i].innerText;\n          const b = +row2.cells[i].innerText;\n\n          return a - b;\n        });\n      } else {\n        clickedTitle = '';\n\n        tbodyRows.sort((row1, row2) => {\n          const a = +row1.cells[i].innerText;\n          const b = +row2.cells[i].innerText;\n\n          return b - a;\n        });\n      }\n\n      break;\n\n    case (i === 4):\n      if (clickedTitle !== target.innerText) {\n        clickedTitle = target.innerText;\n\n        tbodyRows.sort((row1, row2) => {\n          const a = +row1.cells[i].innerText.slice(1).replace(',', '.');\n          const b = +row2.cells[i].innerText.slice(1).replace(',', '.');\n\n          return a - b;\n        });\n      } else {\n        clickedTitle = '';\n\n        tbodyRows.sort((row1, row2) => {\n          const a = +row1.cells[i].innerText.slice(1).replace(',', '.');\n          const b = +row2.cells[i].innerText.slice(1).replace(',', '.');\n\n          return b - a;\n        });\n\n        break;\n      }\n  }\n\n  tbody.append(...tbodyRows);\n});\n\n/* -----selected row----- */\n\ntbody.addEventListener('click', (eventObj) => {\n  const target = eventObj.target.closest('tr');\n\n  if (activeRow && activeRow.className === 'active') {\n    activeRow.className = '';\n  }\n\n  activeRow = target;\n\n  target.className = 'active';\n});\n"]}